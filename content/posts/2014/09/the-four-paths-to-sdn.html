---
url: /2014/09/the-four-paths-to-sdn.html
title: "The Four Paths to SDN"
date: "2014-09-16T06:57:00.000+02:00"
tags: [ SDN,OpenFlow,BGP ]
---

<p>After the initial onslaught of SDN washing, four distinct approaches to SDN have started to emerge, from centralized control plane architectures to smart reuse of existing protocols.</p>
<p>As always, each approach has its benefits and drawbacks, and there’s no universally best solution. You just got four more (somewhat immature) tools in your toolbox. And now for the details.<!--more--></p>
<p class="update">2014-09-16 - added NX-API and management-plane protocols like NETCONF, XMPP and OpFlex.</p>
<h4>Control-Data Plane Separation</h4><p>The “original” (or shall I say orthodox) <a href="https://www.opennetworking.org/sdn-resources/sdn-definition">SDN definition</a> comes from Open Networking Foundation and calls for a strict separation of control- and data planes, with a single control plane being responsible for multiple data planes.</p>
<p>That definition, while <a href="http://blog.ipspace.net/2014/01/what-exactly-is-sdn-and-does-it-make.html">serving the goals of some ONF founding members</a>, is at the moment mostly irrelevant for most enterprise or service provider organizations, who cannot afford to <a href="http://blog.ipspace.net/2012/05/openflow-google-brilliant-but-not.html">become a router manufacturer</a> to build a few dozens of WAN edge routers… and based on the amount of resources NEC invested in <a href="http://demo.ipspace.net/bin/list?id=PFlow">ProgrammableFlow</a> over the last years, it’s not realistic to expect that we’ll be able to use OpenDaylight in production environments any time soon (assuming you’d want to use an architecture with a <a href="http://blog.ipspace.net/2014/09/controller-cluster-is-single-failure.html">single central failure point</a> in the first place).</p>
<p class="note">FYI, I’m not blaming OpenFlow. <a href="http://blog.ipspace.net/2014/05/is-openflow-useful_12.html">OpenFlow is just a low level tool</a> that can be extremely handy when you’re trying to implement unusual ideas.</p>
<p>On a more positive note, reasonably-sized organizations could use OpenFlow to <a href="http://blog.ipspace.net/2011/11/openflow-deployment-models.html#of_integrated">augment the forwarding functionality of existing network devices</a> (in which case the only hardware one could use are a few HP switches, as <a href="http://blog.ipspace.net/2014/05/openflow-support-in-data-center-switches.html">no other major vendor supports <em>send-to-normal </em>OpenFlow action</a>). </p>
<p>I am positive there will be people building <a href="http://blog.ipspace.net/2013/09/openflow-fabric-controllers-are-light.html">OpenFlow controllers controlling forwarding fabrics</a>, but they might eventually realize what a monumental task they undertook when they’ll have to reinvent all the wheels networking industry invented in the last 30 years including:</p>
<ul class="ListParagraph"><li>Topology discovery;</li>
<li>Fast failure detection (including detection of bad links, not just lost links);</li>
<li>Fast reroute around failures;</li>
<li>Path-based forwarding and prefix-independent convergence;</li>
<li>Scalable linecard protocols (LACP, LLDP, STP, BFD …).</li>
</ul>
<h4>Overlay virtual networks</h4><p>The proponents of overlay virtual networking solutions use the same architectural approach that worked well with Telnet (replacing X.25 PAD), VoIP (replacing telephone exchanges) or iSCSI, not to mention the global Internet – reduce the complexity of the problem by decoupling transport fabric from edge functionality (a more cynical mind might be tempted to quote <a href="http://tools.ietf.org/html/rfc1925">RFC 1925</a> section 2.6a).</p>
<p>The decoupling approach works well assuming there are no leaky abstractions (in other words, the overlay can ignore the transport network – which wasn’t exactly the case in Frame Relay or ATM networks). Overlay virtual networks work well over fabrics with equidistant endpoints, and fail as miserably as any other technology when being misused for long-distance VLAN extensions.</p>
<h4>Vendor-specific APIs</h4><p>After the initial magical dust of SDN-washing settled down, only a few vendors remained standing (I’m skipping those that allow you to send configuration commands in XML envelope and call that programmability):</p>
<ul class="ListParagraph"><li>Arista has eAPI (access to EOS command line through JSON-formatted REST calls) as well as the capability to install any Linux component on their switches, and use programmatic access to EOS data structures (sysdb);</li>
<li>Cisco’s OnePK gives you extensive access to inner working of Cisco IOS and IOS XE. NX-API does the same for Nexus 9K (it's so refreshing to get consistently incompatible APIs from the same vendor) and is supposed to become available on other Nexus platforms.</li>
<li>Juniper has some SDK that’s safely tucked behind a partner-only regwall. Just the right thing to do in 2014.</li>
<li>F5 had <a href="https://devcentral.f5.com/articles/what-is-icontrol">iRules and iControl for years</a> (and <a href="https://metacpan.org/pod/BigIP::iControl">there’s a Perl library to use it</a>, which is totally awesome).</li>
</ul>
<p class="note">Have I missed anyone? Please write a comment (and no, I don’t want to hear about <a href="http://blog.ipspace.net/2012/06/netconf-expect-on-steroids.html">NETCONF</a> support).</p>
<p>Not surprisingly, vendors love you to use their API. After all, that’s the ultimate lock-in they can get.</p>
<h4>Reuse of existing protocol</h4><p>While the vendors and the marketers were fighting the positioning battles, experienced engineers did what they do best – they found a solution to a problem with the tools at hand. Many scalable real-life SDN implementations (as opposed to <em>works great in PowerPoint </em>ones) <a href="http://blog.ipspace.net/2013/10/exception-routing-with-bgp-sdn-done.html">use BGP to modify forwarding information in the network</a> (or even filter traffic with BGP FlowSpec), and implement programmatic access to BGP with something like ExaBGP.</p>
<p>Also, don’t forget that we’ve been using remote-triggered black holes for years (<a href="http://tools.ietf.org/html/rfc5635">the RFC describing it</a> is five years old, but the technology itself is way older) – we just didn’t know <a href="http://blog.ipspace.net/2013/11/we-had-sdn-in-1993-and-didnt-know-it.html">we were doing SDN back in those days</a>.</p>
<p>Finally, controllers focused on device- or service provisioning or orchestration commonly use existing management plane protocols like NETCONF or emerging protocols like XMPP or OpFlex.</p>
<p class="note">XMPP is a pretty old protocol, its use in network management is the “emerging” part I had in mind in the previous paragraph.</p>
<h4>Which one should I use?</h4><p>You know the answer: it depends (and I'll got into more details in my <a href="http://www.ipspace.net/SDN_Deployment_Considerations">SDN Deployment Considerations</a> webinar).</p>
<p>If you’re planning to implement novel ideas in the data center, overlay virtual networks might be the way to go (more so as you can change the edge functionality without touching the physical networking infrastructure).</p>
<p>Do you need flexible dynamic ACLs or PBR? Use OpenFlow (or even better, DirectFlow if you have Arista switches).</p>
<p>Looking for a large-scale solution that controls the traffic in LAN or WAN fabric? BGP might be exactly what you need.</p>
<p>Finally, you can do things you cannot do with anything else with some vendor APIs (but do remember the price you’re paying).</p>
<h4>Need more information?</h4><p>Start with <a href="http://www.ipspace.net/SDN">SDN resources</a> @ ipSpace.net, <a href="http://cms.ipspace.net/bin/enroll?id=xSDNReality">download</a> my <a href="http://blog.ipspace.net/2014/09/just-published-sdn-and-openflow-hype.html">new SDN book</a>, or <a href="http://cms.ipspace.net/bin/contact?StySu=SDN+workshop">contact me</a> to organize an <a href="http://www.ipspace.net/SDN,_OpenFlow,_NFV_and_SDDC">on-site SDN workshop</a>.</p>

