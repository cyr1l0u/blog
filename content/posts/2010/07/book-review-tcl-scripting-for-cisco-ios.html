---
title: "Book review: Tcl Scripting for Cisco IOS"
date: "2010-07-20T07:11:00.004+02:00"
tags: [ syslog,Tcl,EEM ]
---

<iframe src="http://rcm-na.amazon-adsystem.com/e/cm?t=cisioshinandt-20&o=1&p=8&l=as1&asins=1587059452&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr" style="width:120px;height:240px;float: right;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe><p>Tcl scripting in Cisco IOS is a somewhat underdocumented topic (have you noticed I’m trying to use diplomatic language), so I was excited when I’d spotted the <em><a href="http://www.amazon.com/gp/product/1587059452?ie=UTF8&tag=cisioshinandt-20&linkCode=xm2&camp=1789&creativeASIN=1587059452">Tcl Scripting for Cisco IOS</a></em>. I got my copy within a few days (thank you so very much, <a href="http://twitter.com/jamieadams76">@jamieadams76</a>) and ran through it in less than three hours. End result: slight disappointment.</p>
<p>If you have no idea what Tcl is, have never used Tcl on Cisco IOS, know only a little bit about Cisco IOS and would like to get started, this is exactly the book you need. If you’re slightly more advanced, continue reading my review. </p>
<p>To be fair, it’s extremely hard to write a good book covering this topic. Very few people know enough about programming <em>and </em>networking. Fluency in Tcl programming <em>and</em> Cisco router configuration is almost non-existent. It’s thus very important that you choose one or the other audience: do you want to teach IOS gurus how to program their boxes in a weird language or do you want to help programmers get control of Cisco IOS. The book tries to do a bit of both, resulting in my mixed feelings.</p>
<!--more--><p>The first two chapters briefly cover Tcl – exactly the material a networking engineer needs if she wants to jump head-first into light Tcl programming. A lot of other books do a better job of teaching you Tcl, but you don’t need much if you just want to add a line or two to your router configuration.</p>
<p>Chapter three covers the basics of Tclsh. Unfortunately it stops there, it skips the more interesting topics, for example: using command line parameters, the use of <strong>typeahead </strong>command or other useful bits-and-pieces I’m covering in my <a href="http://wiki.nil.com/Tclsh_on_Cisco_IOS_tutorial">Tclsh on Cisco IOS tutorial</a>.</p>
<p>Chapter four describes EEM. After a thorough description of what EEM does (very similar material is available on cisco.com) and a truly nice summary of which EEM feature works in which EEM version in which IOS release, it continues with EEM examples. They are so basic and so stretched out that reading them literally hurt me. Just to give you an example: 13 pages (mostly covered with printouts) are spent describing a simple IP SLA applet that replicates the <a href="http://www.google.com/search?q=reliable+static+routing+site%3Ablog.ioshints.info"><em>reliable static routing</em></a><em> </em>function of <strong>ip route ... track </strong>configuration command. Finally, after 40 pages, we get to the EEM Tcl policies, where the writing style becomes truly interesting. One-line chunks of Tcl code are interspersed with explanations like “Validate that the XXX variable is set” next to the code fragment <tt>if {![info exists XXX]} {</tt>. A reader has to invest enormous amount of reverse-engineering to get the big picture:</p>
<ul class="ListParagraph"><li>How you get the values of EEM environment variables.</li>
<li>How you exit from an EEM policy ... and what happens if the policy returns an error (BTW, if it’s explained in Cisco’s documentation, I must have missed it).</li>
<li>How you deal with CLI commands and collect their output.</li>
</ul>
<p>The next chapter is a hodgepodge of <em>advanced </em>(really?) topics, including ESM, EEM, syslog daemon on Cisco IOS (unusable, as it only works with TCP and you have to run it from console or VTY) and ... finally ... Tcl as a Web Server. It’s highly interesting that you can use Tcl to solve the problem IOS had for decade: lack of decent web server (all the ingredients are there, they just need someone to integrate and stress-test them). The security of this solution is conveniently forgotten; by running your own server in Tcl, you’re bypassing all Cisco IOS authentication mechanisms.</p>
<p>Chapter six describes with a web application. You’ll learn how to design a basic web application (including the HTML basics you might have missed); assuming, of course, that you’re willing to forgo all IOS security mechanisms and deploy Tcl-based web server. Yet again – great concept, wrong implementation. IOS should have a well-protected web server able to launch Tcl scripts as CGI scripts.</p>
<p>To end my review on an optimistic note: I truly enjoyed the explanation of <em>signed Tcl </em>in chapter seven and appreciated the IOS-specific Tcl commands listed in the appendix.</p>
<p>As I already said: this is a good book for beginners. It could have been a definitive reference full of interesting tips-and-tricks, but unfortunately it’s not.</p>

