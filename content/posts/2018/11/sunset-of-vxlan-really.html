---
title: "Sunset of VXLAN. Really?"
date: "2018-11-13T07:31:00.000+01:00"
tags: [ VXLAN ]
---

<p><a name="_GoBack"></a>A lightning talk at the recent RIPE77 conference focused on <a href="https://ripe77.ripe.net/presentations/54-the-sunset-of-vxlan-181016-final.pdf">shortcomings of VXLAN and rise of Geneve</a>.</p>
<p>So what are those perceived shortcomings?</p>
<p><strong>No protocol identifier</strong> – a single VXLAN VNI cannot carry more than one payload type. Let me point out that MPLS has the same shortcoming, as does IPsec.<!--more--></p>
<p><strong>Original VXLAN was envisioned for carrying Ethernet payload only</strong>. Correct. There are other whatever-over-IP encapsulation techniques for other use cases, many of them with widespread deployment.</p>
<p><strong>No inband OAM mechanism</strong>. Do we really need a new one? What’s wrong with sending CFM frames between VTEP MAC addresses… varying TTL values if want to track underlay path?</p>
<p><strong>No extensibility</strong>. VXLAN has plenty of reserved fields in its header, but no extensibility… but do we really want another IPv6 headers fiasco? Add enough complexity and extensibility to a tunneling protocol and you’ll have another Fernando Gont running circles around you in no time.</p>
<p class="note">Don’t get the reference? Search for IETF drafts and RFCs Fernando wrote and watch his presentations (I attended several of them at Troopers and Slovenian IPv6 Summit).</p>
<p>I don’t understand the obsession with universally-extensible tools. There’s a reason every craftsman has a toolbox of tools that are just right for the job instead of a giant Swiss Army Knife.</p>
<p>However, don’t worry – IETF NVO3 working group has an answer: <a href="https://tools.ietf.org/pdf/draft-ietf-nvo3-geneve-08.pdf">Geneve</a>. It’s hardware-friendly (so the lightning talk) and has extensible header that can be up to 260 bytes long. I’ve heard that before… and it didn’t end well – we got to a point where <a href="https://blog.ipspace.net/2018/09/smart-or-dumb-nics-on-software-gone-wild.html">software developers gave up on using smart NIC features</a> because of all the underlying complexity.</p>
<p>I can’t help but being reminded of RFC1925 Rule 5… and even if I’m wrong (and I would love to be), do remember that every time someone designs a universal extensible protocol, you’ll be paying for the increased complexity and associated security SNAFUs of every device using it.</p>

