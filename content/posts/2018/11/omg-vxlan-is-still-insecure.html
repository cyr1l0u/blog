---
title: "OMG, VXLAN Is Still Insecure"
date: "2018-11-27T09:01:00.000+01:00"
tags: [ VXLAN,security,NSX ]
---

<p>A friend of mine told me about a &ldquo;<a href="https://ripe77.ripe.net/presentations/32-vxlan-ripe77.pdf">VXLAN is insecure, the sky is falling</a>&rdquo; presentation from RIPE-77 which claims that you can (under certain circumstances) inject packets into VXLAN virtual networks from the Internet.</p>
<p>Welcome back, Captain Obvious. Anyone looking at the VXLAN packet could immediately figure out that <strong>there&rsquo;s no security in VXLAN</strong>. I pointed that out several times in my <a href="https://blog.ipspace.net/2015/04/omg-vxlan-encapsulation-has-no-security.html">blog posts</a> and presentations, including <a href="https://my.ipspace.net/bin/get/CloudNet/Cloud%20Computing%20Networking%20(EuroNOG).pdf">Cloud Computing Networking</a> (EuroNOG, September 2011) and <a href="https://my.ipspace.net/bin/list?id=NSXArch">NSX Architecture</a> webinar (August 2013).<!--more--></p>
<p>Another conclusion I made in NSX Architecture webinar (slide 28, included below) was &ldquo;<strong>transport network MUST be secure</strong>&rdquo; (notice the RFC2119 use of MUST).</p>
<div class='separator'><a href="https://4.bp.blogspot.com/-NYS08Xv8Bxk/W_LgocoUW6I/AAAAAAAAJP0/SlP2OrV_j8srBuMHLRWRP8LaDmsvOIAngCLcBGAs/s1600/VXLAN%2BSecurity.jpg" imageanchor="1" ><img border="0" src="https://4.bp.blogspot.com/-NYS08Xv8Bxk/W_LgocoUW6I/AAAAAAAAJP0/SlP2OrV_j8srBuMHLRWRP8LaDmsvOIAngCLcBGAs/s550/VXLAN%2BSecurity.jpg" data-original-width="1024" data-original-height="768" /></a></div>
<p>I would also like to point out that VXLAN is no different from most other layer-heaping technologies including GRE, L2TP, and MPLS, or earlier virtual circuit technologies like Frame Relay and ATM. The moment an intruder gains access to the transit network it&rsquo;s game over&hellip; but of course it&rsquo;s so much more fun to make the same point with examples like &ldquo;I can insert UDP packets into a VXLAN network&rdquo;. </p>
<p>Well, the presenter should have gone a step further: in VXLAN networks that use dynamic MAC learning instead of a decent control plane, the VTEPs would blindly accept whatever is injected from the outside, <strong>and create forwarding entries </strong>that would ensure the return traffic gets back to the intruder.</p>
<p>Does that mean VXLAN is broken? Not really, any technology can be dangerous in hands of clueless incompetents&hellip; including Kinder Surprise Eggs (there must be a reason <a href="https://en.wikipedia.org/wiki/Kinder_Surprise#United_States">they are banned in some countries</a>).</p>
<p>As always, whenever you want to start using a new tool, you should <a href="https://my.ipspace.net/bin/list?id=NetAutSol&module=1#M1S4A">understand how it works, and what its advantages and limitations are</a>&hellip; after all, you want to <a href="https://blog.ipspace.net/2018/01/how-to-become-better-networking-engineer.html">call yourself an engineer</a>, right? Oh, and don&rsquo;t be surprised when the $vendors don&rsquo;t tell you what the limitations and drawbacks are.</p>
<p>Finally, I would love to see security researchers shift their focus from &ldquo;<em>OMG, look how I managed to break it</em>&rdquo; to &ldquo;<em>there are some fundamental limitations </em><em>of </em><em>what can be done, and if you don&rsquo;t know what they are you might get hurt&hellip; like in this example.&rdquo;</em></p>
<p>And the ubiquitous &ldquo;here&rsquo;s more&rdquo; list:</p>
<ul><li>We'll cover using VXLAN with EVPN across multiple data centers in the <a href="https://www.sig-switzerland.ch/using-vxlan-and-evpn-to-build-active-active-data-centers/">Using VXLAN and EVPN to build active-active data centers</a> workshop on December 5th in Zurich, Switzerland</li>
<li>You&rsquo;ll find tons of VXLAN details in <a href="https://ipspace.net/VXLAN">this webinar</a> (also check out the <a href="https://ipspace.net/EVPN">EVPN Deep Dive</a>).</li>
</ul> 

