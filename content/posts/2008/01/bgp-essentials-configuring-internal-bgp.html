---
title: "BGP Essentials: Configuring Internal BGP Sessions"
date: "2008-01-22T11:02:00.001+01:00"
tags: [ BGP ]
---

Internal BGP (IBGP) sessions (BGP sessions within your autonomous system) are identified by the neighbor’s AS number being identical to your AS number. While the external BGP (EBGP) sessions are usually established between directly-connected routers, IBGP sessions are expected to be configured across the network.<br/><br/>The current best practice is to configure IBGP sessions between the loopback interfaces of the BGP neighbors, ensuring that the TCP session between them (and the BGP adjacency using the TCP session) will not be disrupted after a physical link failure as long as there is an alternate path toward the adjacent router.<br/><br/>To configure IBGP session on a Cisco router, specify the neighbor’s loopback address in all <strong>neighbor</strong> commands and use the <strong>neighbor update-source</strong> command to specify the source IP address of the TCP session. Without the neighbor <strong>update-source</strong> configuration command, the TCP session will use the IP address of the outgoing physical interface and the neighbor will reject the incoming TCP SYN packet as it’s not coming from a recognized BGP neighbor.<br/><br/>The following table shows the configuration commands necessary to configure an IBGP session between loopback interfaces of two routers:<table class="codeTable"><tbody><tr><th>R1</th><th>R2</th></tr><tr><td><blockquote class="code">interface Loopback 0<br/> ip address <span class="high">10.0.0.1</span><br/>!<br/>router bgp 65001<br/> neighbor <span class="high">10.0.0.2</span> remote-as 65001<br/> neighbor 10.0.0.2 <span class="high">update-source loopback 0</span></blockquote>
</td><td><blockquote class="code">interface Loopback 0<br/> ip address <span class="high">10.0.0.2</span><br/>!<br/>router bgp 65001<br/> neighbor <span class="high">10.0.0.1</span> remote-as 65001<br/> neighbor 10.0.0.1 update-source loopback 0</blockquote>
</td></tr></tbody></table><p class="note">If you're looking for more in-depth BGP knowledge, try our <a href="http://www.nil.si/ls/BS_BGP32?showlp">Configuring BGP on Cisco Routers</a> <a href="http://www.nil.si/C1256F0A00429755/html/bs_portfolio">e-learning solution</a>. If you just need to enhance your hands-on skill, the <a href="http://www.nil.si/ls/LB_RL_BGP32?showlp">BGP Remote Lab Bundle</a> is the perfect choice.</p>

