---
title: "OSPF area default-cost is a 16-bit quantity"
date: "2008-07-25T07:15:00.001+02:00"
tags: [ OSPF ]
---

The <b>area <i>area</i> default-cost <i>number</i></b> router configuration command changes the cost of the default route advertised into a stub or NSSA area. IOS documentation claims the cost is a 24-bit number (and both type-3 and type-5/7 LSAs have 24 bits available for the metric), but in reality the router accepts a 24-bit number and remembers the lower 16 bits, potentially resulting in quite unexpected behavior (just try setting the OSPF costs to 30000 on one ABR and 70000 on another). <p class='warn'>Update (2008-08-08): This behavior is reported as bug <a href="http://tools.cisco.com/Support/BugToolKit/search/getBugDetails.do?method=fetchBugDetails&bugId=CSCsl12946">CSCsl12946</a> and fixed in IOS release 12.4(20)T.</p>
<script>startHide() </script>Here is a sample printout taken from a router running IOS release 12.4(15)T5; 12.2(33)SRC behaves identically.<pre class="code">A1(config)#<b>router ospf 1</b><br />A1(config-router)#<b>area 11 default-cost <span class="high">65538</span></b><br /><br />A1#<b>show running | sect router ospf</b><br />router ospf 1<br />&nbsp;log-adjacency-changes<br />&nbsp;area 11 stub<br />&nbsp;<span class="high">area 11 default-cost 2</span><br /><br />A1#<b>show ip ospf 1 database summary 0.0.0.0</b><br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OSPF Router with ID (10.0.1.1) (Process ID 1)<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Summary Net Link States (Area 11)<br /><br />&nbsp;&nbsp;LS age: 16<br />&nbsp;&nbsp;Options: (No TOS-capability, DC, Upward)<br />&nbsp;&nbsp;LS Type: Summary Links(Network)<br />&nbsp;&nbsp;Link State ID: 0.0.0.0 (summary Network Number)<br />&nbsp;&nbsp;Advertising Router: A1<br />&nbsp;&nbsp;LS Seq Number: 80000005<br />&nbsp;&nbsp;Checksum: 0x4CE0<br />&nbsp;&nbsp;Length: 28<br />&nbsp;&nbsp;Network Mask: /0<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TOS: 0  <span class="high">Metric: 2 </span></pre><script>endHide() </script>

