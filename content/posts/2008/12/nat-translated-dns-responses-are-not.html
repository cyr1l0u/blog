---
url: /2008/12/nat-translated-dns-responses-are-not.html
title: "NAT-translated DNS responses are not cacheable"
date: "2008-12-17T06:48:00.003+01:00"
tags: [ DNS,NAT ]
---

<div class="bloggerBody"><p><ins class="corr">Slightly reworded on 2008-12-18.</ins> Not only is NAT (as implemented in Cisco IOS) <a href="http://wiki.nil.com/Network_address_translation_of_DNS_responses">very picky about the translation of IP addresses <ins type="corr">in the payload of DNS responses</ins></a> (it translates only addresses defined in IP-level NAT translations with no additional route-map filters), it also <a href="http://wiki.nil.com/Network_address_translation_of_DNS_responses#TranslatedResponse">sets the TTL field in the DNS response to zero <ins type="corr">when translating an IP address in the DNS response payload based on an existing L3 NAT entry</ins></a> making the DNS response completely uncacheable.</p>
<p>The behavior makes some sense, as the L3 NAT entry might change before the DNS response expires, but the implementation is definitely overly aggressive. In my opinion, IOS should use some sensible (configurable?) value for static NAT translations and times comparable to NAT timeouts for dynamic NAT translations. What do you think?</p>
</div>

