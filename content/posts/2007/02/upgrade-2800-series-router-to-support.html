---
url: /2007/02/upgrade-2800-series-router-to-support.html
title: "Upgrade 2800 series router to support USB boot"
date: "2007-02-21T09:34:00.001+01:00"
tags: [ 2800 ]
---

<iframe border="0" frameborder="0" height="240" marginheight="0" marginwidth="0" scrolling="no" src="http://rcm-na.amazon-adsystem.com/e/cm?t=cisioshinandt-20&amp;o=1&amp;p=8&amp;l=st1&amp;mode=books&amp;search=Cisco%20CCNP&amp;nou=1&amp;fc1=000000&lt;1=_blank&amp;lc1=3366FF&amp;bg1=FFFFFF&amp;f=ifr" style="border:none; float:right;" width="120"></iframe><p>A while ago we were faced with a 2800-series router with no software in its CF card. As all 2800-series routers have USB slots, I started investigating whether you could boot the IOS image from an USB flash token. The product documentation states you can't, but as always, reality changes quicker than documentation in Ciscosphere.</p>
<p>To support IOS boot from USB token, you need a newer version of 2800-series ROMMON which you'll get from the <a href="http://www.cisco.com/cgi-bin/tablebuild.pl/2800rommon">ROMMON download page</a> (registered CCO users only). You need ROMMON release 12.4(13r)T (description: <em>C2800 ROMMON Upgrade; adds boot from usb flash drive capability</em>).<!--more--></p>
<p>After you've downloaded the file onto a USB token, upgrade the router ROMMON with the <strong>upgrade rom-monitor file usbflash0:C2800NM_RM2.srec.124-13r.T</strong> command (requires router reboot).</p>
<p>Test the upgraded ROMMON with the dev command. You should see the USB flash devices:</p>
<pre class="code">rommon 1 &gt; <strong>dev</strong><br/>Devices in device table:<br/>        id  name<br/>    flash:  compact flash<br/>bootflash:  boot flash<br/>usbflash0:  usbflash0<br/>usbflash1:  usbflash1<br/>    eprom:  eprom</pre><p>You can use USB token-resident IOS releases in two ways:</p>
<ul><li>As an emergency boot mechanism when you have problems with the CF card. Remove the CF card, insert USB token, restart the router and use the <strong>boot</strong> rommon command, for example <strong>boot usbflash0:c2800nm-advipservicesk9-mz.124-11.T1.bin</strong>.</li>
<br/><li>As a regular boot image. Use the <strong>boot system</strong> global configuration command to specify the USB token image to use, for example <strong>boot system usbflash0:c2800nm-advipservicesk9-mz.124-11.T1.bin</strong>. The router will not boot off USB token without the <strong>boot system</strong> command ... and, obviously, you should never remove the USB token from the router.</li>
</ul>

