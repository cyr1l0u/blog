---
title: "More details on OSPF route filters"
date: "2007-10-30T07:29:00.000+01:00"
tags: [ OSPF ]
---

I did a few follow-up tests with the <strong>distribute-list in</strong> OSPF configuration command and stumbled across a few interesting facts (IOS release 12.4(15)T1 on a 3725 platform):<ul><li>Although the router allows you to configure <strong>distribute-list <em>acl</em> in <em>interface</em></strong>, it does not work. Routes received through that interface (or having the interface as the next-hop) are not filtered.</li>
<li>When you apply the distribute-list in command, the routing table is not changed. Clearing the IP routing table does not help, you have to clear <em>ALL</em> OSPF processes (including bringing down all OSPF adjacencies) with the <strong>clear ip ospf process</strong> command for the route filter to take effect.</li>
<li>The same limitations don't apply in the other direction: when you remove the <strong>distribute-list in</strong>, SPF is triggered and the routes appear in the IP routing table automatically.</li>
<li>The <a href="http://www.cisco.com/univercd/cc/td/doc/product/software/ios124/124cr/hirp_r/rte_pih.htm#wp1122418">somewhat undocumented <strong>gateway</strong> option</a> of the <strong>distribute-list in</strong> command works, but not quite as I would expect: the IP next hop, not the router-ID of the router advertising the IP prefix is matched by the prefix-list.</li>
</ul>
<p>And, last but not least, I've lab-verified my previous claim: applying the <strong>distribute-list in</strong> on a transit router can result in a black hole, as the LSAs themselves are not filtered.</p>

