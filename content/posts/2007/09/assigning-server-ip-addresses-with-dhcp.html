---
title: "Assigning server IP addresses with DHCP"
date: "2007-09-19T07:56:00.001+02:00"
tags: [ DHCP ]
---

<iframe src="http://rcm-na.amazon-adsystem.com/e/cm?t=cisioshinandt-20&o=1&p=8&l=st1&mode=books&search=Cisco%20LAN&fc1=000000&lt1=_blank&lc1=3366FF&bg1=FFFFFF&f=ifr" marginwidth="0" marginheight="0" width="120" height="240" border="0" frameborder="0" style="border:none; float:right;" scrolling="no"></iframe><p>Using DHCP to assign server IP addresses is usually not a wise decision. To start with, you have to define static DHCP mappings, which rely on client-id attribute in the DHCP request (usually the MAC address of the client). For me, the easiest way to find the correct client ID is as follows:</p>
<ul><li>Use DHCP to assign the IP address to the server</li>
<li>Note the newly assigned IP address</li>
<li>Use the <strong>show ip dhcp bindings | include <em>ip-address</em></strong> command to display the client-id to IP address binding.</li>
<li>Create a static DHCP mapping (for example, by configuring a <strong>host</strong> DHCP pool on the router) and release/renew IP address on the server</li>
</ul>
<p>Of course, if the Ethernet adapter in the server is replaced, the static mapping stops working. The only reliable workaround I've found so far is to assign a locally-administered MAC address to the server's LAN adapter (if anyone has figured out a way to assign ASCII client-ID to a Windows server, let me know). To do it on Windows XP, use the Advanced properties in the adapter configuration window.</p>
<p style='text-align: center;'><a href="http://bp3.blogger.com/_K_pkZO5-tTg/RqOWXNRacTI/AAAAAAAAAHA/RGT6fTXGPn4/s1600-h/LanAdapter.jpg"><img style="display:block; margin:0px auto 10px; text-align:center;cursor:pointer; cursor:hand;" src="http://bp3.blogger.com/_K_pkZO5-tTg/RqOWXNRacTI/AAAAAAAAAHA/RGT6fTXGPn4/s320/LanAdapter.jpg" border="0" alt=""id="BLOGGER_PHOTO_ID_5090077329302647090" /></a></p>
<p class='note'><span>Remember: </span>locally-administered MAC addresses on Ethernet networks start with 02xx.</p>
<p>After you've configured MAC address on the server, prepend 01 to it and insert a dot after every fourth character to get the client-ID you need to enter on the DHCP server. For example, the MAC address 0200.1000.1234 becomes client-id 0102.0010.0012.34, and the static DHCP pool on a router is configured as follows:</p>
<pre class='code'>ip dhcp pool Server_static<br />host 10.0.0.10 255.255.255.0<br />client-identifier 0102.0010.0012.34</pre>

