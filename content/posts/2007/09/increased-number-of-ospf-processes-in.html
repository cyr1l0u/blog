---
title: "Increased number of OSPF processes in MPLS VPN environments"
date: "2007-09-13T08:34:00.001+02:00"
tags: [ OSPF,MPLS VPN ]
---

<iframe src="http://rcm-na.amazon-adsystem.com/e/cm?t=cisioshinandt-20&o=1&p=8&l=as1&asins=1587050021&fc1=000000&IS2=1&lt1=_blank&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr" style="width:120px;height:240px;float:right;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe><p>When we were writing the <a href="http://www.google.com/search?q=%22MPLS+VPN+architectures%22+site%3Aamazon.com">MPLS and VPN architectures books</a>, there was a limit on the number of OSPF processes you could configure per PE-router. The limit was based on the fact that IOS supports up to 32 sources of routing information; two of them are <strong>static</strong> and <strong>connected</strong> plus you need an IGP and BGP in the MPLS VPN backbone, resulting in 28 OSPF processes that could be configured on a single PE-router. This "feature" severely limited OSPF-based MPLS VPN deployments until IOS release 12.3(4)T when the <a href="http://www.cisco.com/univercd/cc/td/doc/product/software/ios124/124cg/hirp_c/ch15/hospfvf.pdf">limitation was removed</a>, resulting in availability of up to 30 routing processes per VRF.</p>
<p class='note'>RIP, BGP and EIGRP never experienced the same limitations as you configure VRF-specific routing instances within address families of a single routing protocol</p>
<script>startHide()</script><p>The details of the actual change that took place are not obvious from the IOS documentation; they simply changed the global allocation of routing process identifiers to per-routing-table identifiers. For example, in the following <strong>show ip protocol summary</strong> printouts, the two OSPF processes (one in global routing table, one in VRF test) share the same index.</p>
<pre class='code'>router#<strong>show ip protocols summary</strong><br />Index Process Name<br />0 connected<br />1 static<br /><span class='high'>2 ospf 112</span><br />router#<strong>show ip protocols vrf Test summary</strong><br />Index Process Name<br />0 connected<br />1 static<br /><span class='high'>2 ospf 111</span></pre><script>endHide()</script>

